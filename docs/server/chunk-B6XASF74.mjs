import './polyfills.server.mjs';
import{a as Y}from"./chunk-UIWMAUGI.mjs";import{a as g}from"./chunk-77GHHARG.mjs";import{a as z}from"./chunk-S2TS7G7E.mjs";import"./chunk-QZLY374Y.mjs";import{a as O,c as N,d as Q,h as k,i as G,j as L,l as I,n as j}from"./chunk-J4PW23HJ.mjs";import"./chunk-HCOGX7OE.mjs";import{k as R}from"./chunk-52P3PWSC.mjs";import{l as D}from"./chunk-HIKXIYV6.mjs";import{$ as V,Cb as P,Db as S,Eb as A,Fb as d,Hb as x,Nb as B,Pa as s,Qb as M,X as E,eb as f,gb as v,ja as F,ka as U,kb as p,ob as r,pb as i,qb as h,tb as q,xb as b,yb as w}from"./chunk-XYGJBAR7.mjs";import{g as W}from"./chunk-VVCT4QZE.mjs";var Z=W(Y());var $=["verifyemail"],H=["verifycode"],J=["resetpass"],T=(t,l)=>({"is-valid":t,"is-invalid":l});function K(t,l){t&1&&(r(0,"p",19),d(1,"email is required."),i())}function X(t,l){t&1&&(r(0,"p",19),d(1,"Please enter a valid email address"),i())}function ee(t,l){if(t&1&&(r(0,"div",9),f(1,K,2,0,"p",19)(2,X,2,0),i()),t&2){let a,n=w();s(),p(1,(a=n.verifyEmail.get("email"))!=null&&a.getError("required")?1:(a=n.verifyEmail.get("email"))!=null&&a.getError("email")?2:-1)}}function te(t,l){if(t&1&&(r(0,"div",9),d(1),i()),t&2){let a=w();s(),x(" ",a.errMsg," ")}}function ie(t,l){t&1&&(r(0,"span"),h(1,"i",20),i())}function re(t,l){t&1&&(r(0,"p",19),d(1,"resetCode is required."),i())}function oe(t,l){if(t&1&&(r(0,"div",9),f(1,re,2,0,"p",19),i()),t&2){let a,n=w();s(),p(1,(a=n.verifyCode.get("resetCode"))!=null&&a.getError("required")?1:-1)}}function ne(t,l){if(t&1&&(r(0,"div",9),d(1),i()),t&2){let a=w();s(),x(" ",a.errMsg," ")}}function se(t,l){t&1&&(r(0,"p",19),d(1,"password is required."),i())}function le(t,l){t&1&&(r(0,"p",19),d(1,"Password must be at least 6 characters long."),i())}function ae(t,l){if(t&1&&(r(0,"div",9),f(1,se,2,0,"p",19)(2,le,2,0),i()),t&2){let a,n=w();s(),p(1,(a=n.resetPassword.get("newPassword"))!=null&&a.getError("required")?1:(a=n.resetPassword.get("newPassword"))!=null&&a.getError("pattern")?2:-1)}}function de(t,l){if(t&1&&(r(0,"div",9),d(1),i()),t&2){let a=w();s(),x(" ",a.errMsg," ")}}var _e=(()=>{let l=class l{constructor(){this._FormBuilder=E(I),this._AuthService=E(z),this._Router=E(R),this.isloading=!1,this.errMsg="",this.userEmail="",this.verifyEmail=this._FormBuilder.group({email:[null,[g.required(),g.email()]]}),this.verifyCode=this._FormBuilder.group({resetCode:[null,[g.required(),g.pattern({expression:{pattern:/^.{6}$/}})]]}),this.resetPassword=this._FormBuilder.group({email:[null,[g.required(),g.email()]],newPassword:[null,[g.required(),g.pattern({expression:{pattern:/^.{6,}$/}})]]})}onverifyEmail(){this.verifyEmail.valid?(this.isloading=!0,this.errMsg="",this.verifyEmailSubscribe=this._AuthService.verifyEmail(this.verifyEmail.value).subscribe({next:n=>{n.statusMsg=="success"&&(this.userEmail=this.verifyEmail.get("email")?.value,this.verifyemail.nativeElement.classList.add("d-none"),this.verifycode.nativeElement.classList.remove("d-none"),this.resetPassword.get("email")?.patchValue(this.userEmail))},error:n=>{this.errMsg=n.error.message,this.isloading=!1}})):this.verifyEmail.markAllAsTouched()}onVerifyCode(){this.verifyCode.valid?(this.errMsg="",this.verifyCodeSubscribe=this._AuthService.verifyCode(this.verifyCode.value).subscribe({next:n=>{n.status=="Success"&&(this.verifycode.nativeElement.classList.add("d-none"),this.resetpass.nativeElement.classList.remove("d-none"))},error:n=>{this.errMsg=n.error.message}})):this.verifyCode.markAllAsTouched()}onResetPassword(){console.log(this.resetPassword),this.resetPassword.valid?(this.errMsg="",this.resetPasswordSubscribe=this._AuthService.resetPassword(this.resetPassword.value).subscribe({next:n=>{Z.default.fire({icon:"success",title:"Password Updated Successfully!",customClass:{popup:"rounded-5"},confirmButtonColor:"green",background:"#e7ece8",showConfirmButton:!1,allowOutsideClick:!1,timer:2e3}),setTimeout(()=>{localStorage.setItem("userToken",n.token),this._Router.navigate(["/login"])},2e3)},error:n=>{this.errMsg=n.error.message}})):this.resetPassword.markAllAsTouched()}ngOnDestroy(){this.verifyEmailSubscribe?.unsubscribe(),this.verifyCodeSubscribe?.unsubscribe(),this.resetPasswordSubscribe?.unsubscribe()}};l.\u0275fac=function(C){return new(C||l)},l.\u0275cmp=V({type:l,selectors:[["app-forgotpassword"]],viewQuery:function(C,e){if(C&1&&(P($,5),P(H,5),P(J,5)),C&2){let o;S(o=A())&&(e.verifyemail=o.first),S(o=A())&&(e.verifycode=o.first),S(o=A())&&(e.resetpass=o.first)}},standalone:!0,features:[B],decls:38,vars:23,consts:[["verifyemail",""],["verifycode",""],["resetpass",""],[1,"bg-main-light","p-2","my-5","rounded-4","text-main","forgot"],[1,"h2","text-center","forgot-text"],[3,"ngSubmit","formGroup"],[1,"my-2"],["for","emailVerify"],["type","email","name","email","id","emailVerify","formControlName","email",1,"form-control",3,"ngClass"],[1,"w-100","alert","alert-danger","p-1","text-center","mt-2","mb-0","small","fw-bolder"],["type","submit",1,"btn-main","w-100",3,"disabled"],[1,"d-none",3,"ngSubmit","formGroup"],["for","resetCode"],["type","text","name","resetCode","id","resetCode","formControlName","resetCode",1,"form-control",3,"ngClass"],["type","submit",1,"btn-main","w-100"],["for","email"],["type","email","name","email","id","email","formControlName","email","readonly","",1,"form-control"],["for","newPassword"],["type","password","id","newPassword","formControlName","newPassword",1,"form-control",3,"ngClass"],[1,"m-0"],[1,"fas","fa-spin","fa-spinner"]],template:function(C,e){if(C&1){let o=q();r(0,"section",3)(1,"h1",4),d(2,"Forgot Password"),i(),r(3,"form",5,0),b("ngSubmit",function(){return F(o),U(e.onverifyEmail())}),r(5,"div",6)(6,"label",7),d(7,"email:"),i(),h(8,"input",8),f(9,ee,3,1,"div",9),i(),f(10,te,2,1,"div",9),r(11,"button",10),d(12," Verify Email "),f(13,ie,2,0,"span"),i()(),r(14,"form",11,1),b("ngSubmit",function(){return F(o),U(e.onVerifyCode())}),r(16,"div",6)(17,"label",12),d(18,"resetCode:"),i(),h(19,"input",13),f(20,oe,2,1,"div",9),i(),f(21,ne,2,1,"div",9),r(22,"button",14),d(23," Verify Code "),i()(),r(24,"form",11,2),b("ngSubmit",function(){return F(o),U(e.onResetPassword())}),r(26,"div",6)(27,"label",15),d(28,"email:"),i(),h(29,"input",16),i(),r(30,"div",6)(31,"label",17),d(32,"newPassword:"),i(),h(33,"input",18),f(34,ae,3,1,"div",9),i(),f(35,de,2,1,"div",9),r(36,"button",14),d(37," Reset Password "),i()()()}if(C&2){let o,c,m,y,u,_;s(3),v("formGroup",e.verifyEmail),s(5),v("ngClass",M(14,T,!((o=e.verifyEmail.get("email"))!=null&&o.errors)&&(((o=e.verifyEmail.get("email"))==null?null:o.touched)||((o=e.verifyEmail.get("email"))==null?null:o.dirty)),e.errMsg||((o=e.verifyEmail.get("email"))==null?null:o.errors)&&(((o=e.verifyEmail.get("email"))==null?null:o.touched)||((o=e.verifyEmail.get("email"))==null?null:o.dirty)))),s(),p(9,(c=e.verifyEmail.get("email"))!=null&&c.errors&&((c=e.verifyEmail.get("email"))!=null&&c.touched||(c=e.verifyEmail.get("email"))!=null&&c.dirty)?9:-1),s(),p(10,e.errMsg&&!e.isloading?10:-1),s(),v("disabled",e.isloading),s(2),p(13,e.isloading?13:-1),s(),v("formGroup",e.verifyCode),s(5),v("ngClass",M(17,T,!((m=e.verifyCode.get("resetCode"))!=null&&m.errors)&&(((m=e.verifyCode.get("resetCode"))==null?null:m.touched)||((m=e.verifyCode.get("resetCode"))==null?null:m.dirty)),e.errMsg||((m=e.verifyCode.get("resetCode"))==null?null:m.errors)&&(((m=e.verifyCode.get("resetCode"))==null?null:m.touched)||((m=e.verifyCode.get("resetCode"))==null?null:m.dirty)))),s(),p(20,(y=e.verifyCode.get("resetCode"))!=null&&y.getError("required")&&((y=e.verifyCode.get("resetCode"))!=null&&y.touched||(y=e.verifyCode.get("resetCode"))!=null&&y.dirty)?20:-1),s(),p(21,e.errMsg?21:-1),s(3),v("formGroup",e.resetPassword),s(9),v("ngClass",M(20,T,!((u=e.resetPassword.get("newPassword"))!=null&&u.errors)&&(((u=e.resetPassword.get("newPassword"))==null?null:u.touched)||((u=e.resetPassword.get("newPassword"))==null?null:u.dirty)),e.errMsg||((u=e.resetPassword.get("newPassword"))==null?null:u.errors)&&(((u=e.resetPassword.get("newPassword"))==null?null:u.touched)||((u=e.resetPassword.get("newPassword"))==null?null:u.dirty)))),s(),p(34,(_=e.resetPassword.get("newPassword"))!=null&&_.errors&&((_=e.resetPassword.get("newPassword"))!=null&&_.touched||(_=e.resetPassword.get("newPassword"))!=null&&_.dirty)?34:-1),s(),p(35,e.errMsg?35:-1)}},dependencies:[j,k,O,N,Q,G,L,D],styles:['@font-face{font-family:Concert One;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/concertone/v22/VEM1Ro9xs5PjtzCu-srDqSTsjP6yuQ.woff2) format("woff2");unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Concert One;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/concertone/v22/VEM1Ro9xs5PjtzCu-srDqSTijP4.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:Lilita One;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/lilitaone/v15/i7dPIFZ9Zz-WBtRtedDbYE98RWq7.woff2) format("woff2");unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Lilita One;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/lilitaone/v15/i7dPIFZ9Zz-WBtRtedDbYEF8RQ.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}.forgot[_ngcontent-%COMP%]{box-shadow:0 2px 10px #8f8f8f;margin:auto}.forgot-text[_ngcontent-%COMP%]{font-family:Lilita One,sans-serif;font-size:30px}@media (min-width: 768px){.forgot[_ngcontent-%COMP%]{width:50%}}@media (min-width: 992px){.forgot[_ngcontent-%COMP%]{width:30%}}']});let t=l;return t})();export{_e as ForgotpasswordComponent};
