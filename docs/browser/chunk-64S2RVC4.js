import{a as Y}from"./chunk-XG6EI434.js";import{a as R,c as V,g as z,m as j}from"./chunk-BN2FMV5P.js";import{a as q}from"./chunk-FIPC2RVN.js";import{a as Q}from"./chunk-NKEFFQH3.js";import{l as G}from"./chunk-TIJ5NDGT.js";import{a as $}from"./chunk-GGQOJ67K.js";import{a as Z}from"./chunk-ZKMRKIND.js";import"./chunk-SZXLN6HP.js";import{e as B,h as N}from"./chunk-K73KBK7O.js";import{j as D}from"./chunk-VS3RXJSE.js";import{Ab as y,Bb as l,Ib as d,Jb as u,Kb as P,Mb as k,Nb as E,Oa as b,Ob as W,Qb as M,Rb as T,Sa as r,Sb as w,Wb as S,Xb as L,Yb as I,ba as m,ea as F,hb as g,jb as _,kb as A,nb as C,oa as h,ob as O,pa as f,pb as x,qb as v,rb as o,sb as s,tb as p,wb as U}from"./chunk-SHLI2ADH.js";var H=(n,a)=>a.id,J=n=>["/details",n],K=()=>[1,2,3,4,5],X=n=>({"text-danger":n});function tt(n,a){if(n&1&&(o(0,"div",9)(1,"span",19),d(2),S(3,"intNum"),s()()),n&2){let i=l().$implicit;r(2),P("",L(3,1,(i.price-i.priceAfterDiscount)/i.price*100),"% off")}}function et(n,a){n&1&&(o(0,"span"),p(1,"i",20),s())}function it(n,a){if(n&1&&(o(0,"span"),p(1,"i",20),s()),n&2){let i=l().$implicit;r(),A("clip-path","inset(0 "+(100-i.ratingsAverage%1*100)+"% 0 0)")}}function nt(n,a){if(n&1){let i=U();o(0,"div",7)(1,"div",8),g(2,tt,4,3,"div",9),o(3,"div",10),p(4,"img",11),o(5,"h2",12),d(6),s(),o(7,"h3",13),d(8),s(),o(9,"div",14)(10,"span"),d(11),s(),o(12,"div",15),x(13,et,2,0,"span",null,O),g(15,it,2,2,"span"),s()()(),o(16,"span",16),y("click",function(){let t=h(i).$implicit,c=l(2);return f(c.addToWishList(t.id))}),p(17,"i",17),s(),o(18,"button",18),y("click",function(){let t=h(i).$implicit,c=l(2);return f(c.addToCart(t.id))}),d(19," + Add To Cart "),s()()()}if(n&2){let i=a.$implicit,e=l(2);r(2),C(2,i.priceAfterDiscount&&i.price!==i.priceAfterDiscount?2:-1),r(),_("routerLink",w(9,J,i.id)),r(),_("src",i.imageCover,b)("alt",i.title),r(2),u(i.category.name),r(2),u(i.title.split(" ",2).join(" ")),r(3),P("",i.price," EGP"),r(2),v(T(11,K).slice(0,i.ratingsAverage)),r(2),C(15,i.ratingsAverage%1!==0?15:-1),r(),_("ngClass",w(12,X,e.isProductinWish(i.id)))}}function ot(n,a){if(n&1){let i=U();o(0,"h1",1),d(1),s(),o(2,"div",2)(3,"input",3),W("ngModelChange",function(t){h(i);let c=l();return E(c.text,t)||(c.text=t),f(t)}),s(),o(4,"span",4),p(5,"i",5),s()(),o(6,"div",6),x(7,nt,20,14,"div",7,H),S(9,"search"),s()}if(n&2){let i=l();r(),u(i.categoryname),r(2),k("ngModel",i.text),r(4),v(I(9,2,i.categoryArr,i.text))}}function rt(n,a){if(n&1&&(o(0,"div",21),p(1,"img",22),o(2,"h1",23)(3,"span",24),d(4),s(),d(5," Products are "),o(6,"span",25),d(7,"Out Of Stock Now"),s()()()),n&2){let i=l();r(4),u(i.categoryname)}}var xt=(()=>{let a=class a{constructor(){this._ActivatedRoute=m(B),this._ProductsService=m(q),this._CartService=m(Z),this._ToastrService=m(G),this.categoryname="",this.text="",this.categoryArr=[],this._WishListService=m($),this.productsInWish=[],this.productsId=[],this.wishProducts=[],this.isClicked=!1}ngOnInit(){this._ActivatedRoute.paramMap.subscribe({next:e=>{this.categoryname=e.get("name")},error:e=>{console.log(e)}}),this.getcategoryproducts=this._ProductsService.getAllProducts().subscribe({next:e=>{for(let t=0;t<e.data.length;t++)e.data[t].category.name==this.categoryname&&this.categoryArr.push(e.data[t])},error:e=>{console.log(e)}}),this.getProductsInWish=this._WishListService.getProductsInWish().subscribe({next:e=>{if(this._WishListService.wishListProducts.next(e.data),this._WishListService.wishListProducts.subscribe({next:t=>{this.wishProducts=t}}),e.data.length>0){this.productsId=[];for(let t=0;t<e.data.length;t++)this.productsId.push(e.data[t].id)}else this.productsId=[]}}),this.UpdateWishNum=this._WishListService.wishItemsNumber.subscribe({next:e=>{this.productsId=e}})}addToCart(e){this.addtocart=this._CartService.addProductToCart(e).subscribe({next:t=>{this._ToastrService.success("Added to cart!","",{positionClass:"toast-top-center"}),this._CartService.cartItemsNumber.next(t.numOfCartItems)},error:t=>{console.log(t)}})}toggleClick(){return this.isClicked=!this.isClicked,this.isClicked}addToWishList(e){this.isProductinWish(e)?this.isClicked=!0:this.isClicked=!1,this.toggleClick()?this.addtowish=this._WishListService.addProductToWishList(e).subscribe({next:t=>{this._ToastrService.success("Added to wishList\u2764\uFE0F","",{positionClass:"toast-top-center"}),this._WishListService.wishItemsNumber.next(t.data),this._WishListService.productsCount.next(t.data.length)},error:t=>{console.log(t)}}):this._WishListService.removeProductFromWish(e).subscribe({next:t=>{this._WishListService.productsCount.next(t.data.length),this._ToastrService.error("Removed From WishList","",{positionClass:"toast-top-center"}),this._WishListService.wishItemsNumber.next(t.data);for(let c of this.wishProducts)e===c.id&&this.wishProducts.splice(this.wishProducts.indexOf(c),1)}})}isProductinWish(e){for(let t=0;t<this.productsId.length;t++)if(this.productsId[t]===e)return!0;return!1}ngOnDestroy(){this.getcategoryproducts?.unsubscribe(),this.addtocart?.unsubscribe()}};a.\u0275fac=function(t){return new(t||a)},a.\u0275cmp=F({type:a,selectors:[["app-category-products"]],standalone:!0,features:[M],decls:3,vars:1,consts:[[1,"my-3"],[1,"h2","text-center","product-text","text-main","my-3"],[1,"w-50","mx-auto","my-3","search-container"],["type","search","placeholder","Search By Title...",1,"search","w-100",3,"ngModelChange","ngModel"],[1,"d-block"],[1,"fa-solid","fa-magnifying-glass"],[1,"row","g-4"],[1,"col-sm-6","col-md-4","col-lg-3","col-xl-2"],[1,"p-2","bg-transparent","product","card-text","h-100","my-card"],[1,"sale","border-0"],[3,"routerLink"],[1,"w-100",3,"src","alt"],[1,"small","text-main","mt-1"],[1,"h6"],[1,"d-flex","justify-content-between","align-items-center"],[1,"stars"],[1,"d-block","cursor-pointer","my-2","heart-icon",3,"click","ngClass"],[1,"fa-solid","fa-heart","fa-xl"],[1,"btn-main","w-100","py-1",3,"click"],[1,"small","fw-bolder"],[1,"bi","bi-star-fill","rating-color","small"],[1,"text-center"],["src","./assets/images/OutOfStock.png","alt","empty cart",1,"outOfStock"],[1,"fw-bolder","card-text"],[1,"text-main"],[1,"text-danger"]],template:function(t,c){t&1&&(o(0,"section",0),g(1,ot,10,5)(2,rt,8,1),s()),t&2&&(r(),C(1,c.categoryArr&&c.categoryArr.length>0?1:2))},dependencies:[N,Q,j,R,V,z,Y,D],styles:['@font-face{font-family:Concert One;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/concertone/v22/VEM1Ro9xs5PjtzCu-srDqSTsjP6yuQ.woff2) format("woff2");unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Concert One;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/concertone/v22/VEM1Ro9xs5PjtzCu-srDqSTijP4.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:Lilita One;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/lilitaone/v15/i7dPIFZ9Zz-WBtRtedDbYE98RWq7.woff2) format("woff2");unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Lilita One;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/lilitaone/v15/i7dPIFZ9Zz-WBtRtedDbYEF8RQ.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}.product-text[_ngcontent-%COMP%]{font-family:Lilita One,sans-serif;font-size:30px}.my-card[_ngcontent-%COMP%]{box-shadow:0 1px 5px #8f8f8f}.sale[_ngcontent-%COMP%]{position:absolute;padding:6px;top:0;right:0;background-color:#eeaf00}.outOfStock[_ngcontent-%COMP%]{width:100%}.search[_ngcontent-%COMP%]{padding:10px;border-radius:50px;background-color:transparent;color:var(--card-text);border:1px solid var(--main-color)}.search-container[_ngcontent-%COMP%]{position:relative}.search-container[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{padding:6px 10px;border-radius:50px;position:absolute;top:4px;right:6px;color:#fff;background-color:var(--main-color)}[_ngcontent-%COMP%]::-webkit-input-placeholder{color:var(--card-text)}[_ngcontent-%COMP%]::-moz-placeholder{color:var(--card-text)}[_ngcontent-%COMP%]:-ms-input-placeholder{color:var(--card-text)}[_ngcontent-%COMP%]:-moz-placeholder{color:var(--card-text)}.heart-icon[_ngcontent-%COMP%]{color:#8080803d}@media (min-width: 576px){.outOfStock[_ngcontent-%COMP%]{width:50%}}@media (min-width: 768px){.outOfStock[_ngcontent-%COMP%]{width:25%}.search-container[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{padding:7px 30px}}']});let n=a;return n})();export{xt as CategoryProductsComponent};
