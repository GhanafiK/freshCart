import{a as j}from"./chunk-N7G2I44G.js";import{a as y}from"./chunk-FCIK77NY.js";import{a as x,c as k,d as T,h as R,i as B,j as q,l as I,n as N}from"./chunk-BN2FMV5P.js";import{a as M}from"./chunk-ZKMRKIND.js";import"./chunk-SZXLN6HP.js";import{e as P,g as A}from"./chunk-K73KBK7O.js";import{j as D}from"./chunk-VS3RXJSE.js";import{Ab as v,Bb as b,Ib as s,Qb as w,Sa as a,Tb as E,ba as F,ea as O,hb as c,jb as _,nb as p,rb as r,sb as i,tb as C}from"./chunk-SHLI2ADH.js";var S=(t,o)=>({"is-valid":t,"is-invalid":o});function z(t,o){t&1&&(r(0,"p",19),s(1,"details is required."),i())}function V(t,o){if(t&1&&(r(0,"div",7),c(1,z,2,0,"p",19),i()),t&2){let u,n=b();a(),p(1,(u=n.orderForm.get("details"))!=null&&u.getError("required")?1:-1)}}function G(t,o){t&1&&(r(0,"p",19),s(1,"phone number is required."),i())}function Z(t,o){t&1&&(r(0,"p",19),s(1,"phone number must be a valid Egyptian number."),i())}function L(t,o){if(t&1&&(r(0,"div",7),c(1,G,2,0,"p",19)(2,Z,2,0),i()),t&2){let u,n=b();a(),p(1,(u=n.orderForm.get("phone"))!=null&&u.getError("required")?1:(u=n.orderForm.get("phone"))!=null&&u.getError("pattern")?2:-1)}}function W(t,o){t&1&&(r(0,"p",19),s(1,"city is required."),i())}function Y(t,o){if(t&1&&(r(0,"div",7),c(1,W,2,0,"p",19),i()),t&2){let u,n=b();a(),p(1,(u=n.orderForm.get("city"))!=null&&u.getError("required")?1:-1)}}function Q(t,o){t&1&&(r(0,"span"),C(1,"i",20),i())}var oe=(()=>{let o=class o{constructor(){this._FormBuilder=F(I),this._ActivatedRoute=F(P),this._PaymentService=F(j),this._CartService=F(M),this._Router=F(A),this.checkeditem="Online Payment",this.cartId="",this.isloading=!1,this.orderForm=this._FormBuilder.group({details:[null,[y.required()]],phone:[null,[y.required(),y.pattern({expression:{pattern:/^01[0125][0-9]{8}$/}})]],city:[null,[y.required()]]})}ngOnInit(){this.getCartId=this._ActivatedRoute.paramMap.subscribe({next:n=>{this.cartId=n.get("id")},error:n=>{console.log(n)}})}onsubmit(){this.orderForm.valid?(this.isloading=!0,this.checkeditem=="Online Payment"?this.creditPayment=this._PaymentService.creditPayment(this.cartId,this.orderForm.value).subscribe({next:n=>{this.isloading=!1,window.open(n.session.url,"_self"),this._CartService.cartItemsNumber.next(0)},error:n=>{console.log(n)}}):this.checkeditem=="Cash on Delivery (COD)"?this.cashPayment=this._PaymentService.cashPayment(this.cartId,this.orderForm.value).subscribe({next:n=>{n.status==="success"&&(this.isloading=!1,this._Router.navigate(["/allorders"]),this._CartService.cartItemsNumber.next(0))},error:n=>{console.log(n)}}):console.log("error Here")):this.orderForm.markAllAsTouched()}checkStatus(n){this.checkeditem=n}ngOnDestroy(){this.creditPayment?.unsubscribe(),this.cashPayment?.unsubscribe(),this.getCartId?.unsubscribe()}};o.\u0275fac=function(U){return new(U||o)},o.\u0275cmp=O({type:o,selectors:[["app-order"]],standalone:!0,features:[w],decls:32,vars:18,consts:[[1,"bg-main-light","p-2","my-5","rounded-4","text-main","order"],[1,"h2","text-center","order-text","fw-bolder"],[1,"px-3"],[3,"ngSubmit","formGroup"],[1,"my-2"],["for","details"],["type","text","id","details","formControlName","details",1,"form-control","mt-1",3,"ngClass"],[1,"w-100","alert","alert-danger","p-1","text-center","mt-2","mb-0","small","fw-bolder"],["for","phone"],["type","tel","id","phone","formControlName","phone",1,"form-control","mt-1",3,"ngClass"],["for","city"],["type","text","id","city","formControlName","city",1,"form-control","mt-1",3,"ngClass"],[1,"mt-3"],[1,"form-check"],["type","radio","name","payment","id","Cash",1,"form-check-input",3,"change"],["for","Cash",1,"form-check-label"],["type","radio","name","payment","id","Credit","checked","",1,"form-check-input",3,"change"],["for","Credit",1,"form-check-label"],["type","submit",1,"btn-main","w-100","my-3",3,"disabled"],[1,"m-0"],[1,"fas","fa-spin","fa-spinner"]],template:function(U,e){if(U&1&&(r(0,"section",0)(1,"h1",1),s(2,"Shipping Details"),i(),r(3,"div",2)(4,"form",3),v("ngSubmit",function(){return e.onsubmit()}),r(5,"div",4)(6,"label",5),s(7,"Details"),i(),C(8,"textarea",6),c(9,V,2,1,"div",7),i(),r(10,"div",4)(11,"label",8),s(12,"Your phone"),i(),C(13,"input",9),c(14,L,3,1,"div",7),i(),r(15,"div",4)(16,"label",10),s(17,"city"),i(),C(18,"input",11),c(19,Y,2,1,"div",7),i(),r(20,"div",12)(21,"div",13)(22,"input",14),v("change",function(){return e.checkStatus("Cash on Delivery (COD)")}),i(),r(23,"label",15),s(24," Cash on Delivery (COD) "),i()(),r(25,"div",13)(26,"input",16),v("change",function(){return e.checkStatus("Online Payment")}),i(),r(27,"label",17),s(28," Online Payment "),i()()(),r(29,"button",18),s(30," Check Out "),c(31,Q,2,0,"span"),i()()()()),U&2){let l,f,d,h,m,g;a(4),_("formGroup",e.orderForm),a(4),_("ngClass",E(9,S,!((l=e.orderForm.get("details"))!=null&&l.errors)&&(((l=e.orderForm.get("details"))==null?null:l.touched)||((l=e.orderForm.get("details"))==null?null:l.dirty)),((l=e.orderForm.get("details"))==null?null:l.errors)&&(((l=e.orderForm.get("details"))==null?null:l.touched)||((l=e.orderForm.get("details"))==null?null:l.dirty)))),a(),p(9,(f=e.orderForm.get("details"))!=null&&f.errors&&((f=e.orderForm.get("details"))!=null&&f.touched||(f=e.orderForm.get("details"))!=null&&f.dirty)?9:-1),a(4),_("ngClass",E(12,S,!((d=e.orderForm.get("phone"))!=null&&d.errors)&&(((d=e.orderForm.get("phone"))==null?null:d.touched)||((d=e.orderForm.get("phone"))==null?null:d.dirty)),((d=e.orderForm.get("phone"))==null?null:d.errors)&&(((d=e.orderForm.get("phone"))==null?null:d.touched)||((d=e.orderForm.get("phone"))==null?null:d.dirty)))),a(),p(14,(h=e.orderForm.get("phone"))!=null&&h.errors&&((h=e.orderForm.get("phone"))!=null&&h.touched||(h=e.orderForm.get("phone"))!=null&&h.dirty)?14:-1),a(4),_("ngClass",E(15,S,!((m=e.orderForm.get("city"))!=null&&m.errors)&&(((m=e.orderForm.get("city"))==null?null:m.touched)||((m=e.orderForm.get("city"))==null?null:m.dirty)),((m=e.orderForm.get("city"))==null?null:m.errors)&&(((m=e.orderForm.get("city"))==null?null:m.touched)||((m=e.orderForm.get("city"))==null?null:m.dirty)))),a(),p(19,(g=e.orderForm.get("city"))!=null&&g.errors&&((g=e.orderForm.get("city"))!=null&&g.touched||(g=e.orderForm.get("city"))!=null&&g.dirty)?19:-1),a(10),_("disabled",e.isloading),a(2),p(31,e.isloading?31:-1)}},dependencies:[N,R,x,k,T,B,q,D],styles:['@font-face{font-family:Concert One;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/concertone/v22/VEM1Ro9xs5PjtzCu-srDqSTsjP6yuQ.woff2) format("woff2");unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Concert One;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/concertone/v22/VEM1Ro9xs5PjtzCu-srDqSTijP4.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:Lilita One;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/lilitaone/v15/i7dPIFZ9Zz-WBtRtedDbYE98RWq7.woff2) format("woff2");unicode-range:U+0100-02AF,U+0304,U+0308,U+0329,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Lilita One;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/lilitaone/v15/i7dPIFZ9Zz-WBtRtedDbYEF8RQ.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}.order[_ngcontent-%COMP%]{box-shadow:0 2px 10px #8f8f8f;margin:auto}.order-text[_ngcontent-%COMP%]{font-family:Lilita One,sans-serif;font-size:30px}@media (min-width: 768px){.order[_ngcontent-%COMP%]{width:50%}}@media (min-width: 992px){.order[_ngcontent-%COMP%]{width:30%}}']});let t=o;return t})();export{oe as OrderComponent};
